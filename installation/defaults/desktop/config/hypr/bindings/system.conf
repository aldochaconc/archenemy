#
# System Utilities Bindings
# https://wiki.hyprland.org/Configuring/Binds/
#
# Screenshots, notifications, system toggles, menus, and information displays.
#

# ============================================================================
# SCREENSHOT BINDINGS
# ============================================================================
# Capture screen content with various modes
# Uses: grim (screenshot), slurp (region selection), wl-copy (clipboard)

# Full Screenshot to Clipboard (PRINT)
#   - Captures entire screen
#   - Copies to clipboard
#   - Shows notification
bind = , PRINT, exec, ~/.config/hypr/bindings/system.sh screenshot_clipboard

# Selection Screenshot to Clipboard (SHIFT + PRINT)
#   - Interactive region selection
#   - Copies selection to clipboard
bind = SHIFT, PRINT, exec, ~/.config/hypr/bindings/system.sh screenshot_selection_clipboard

# Screenshot with Editor (SUPER + PRINT)
#   - Captures and opens in image editor for annotation
#   - Useful for marking up screenshots before sharing
bind = SUPER, PRINT, exec, ~/.config/hypr/bindings/system.sh screenshot_edit

# Save Full Screenshot to File (CTRL + PRINT)
#   - Saves to ~/Pictures/Screenshots/ with timestamp
# bind = CTRL, PRINT, exec, ~/.config/hypr/bindings/system.sh screenshot_save

# Save Selection to File (CTRL + SHIFT + PRINT)
# bind = CTRL SHIFT, PRINT, exec, ~/.config/hypr/bindings/system.sh screenshot_save_selection

# Screenshot Current Window (SUPER + SHIFT + PRINT)
#   - Captures only the active window
# bind = SUPER SHIFT, PRINT, exec, ~/.config/hypr/bindings/system.sh screenshot_window

# ============================================================================
# SCREENRECORDING (Video Capture)
# ============================================================================
# Record screen activity
# Uses: wf-recorder or obs-studio

# Toggle Screenrecording (SUPER + ALT + PRINT)
#   - Start/stop monitor recording
#   - Saves to ~/Videos/Recordings/
bind = SUPER ALT, PRINT, exec, ~/.config/hypr/bindings/system.sh toggle_screenrecord

# Selection Recording (record specific region)
bind = SUPER SHIFT ALT, PRINT, exec, ~/.config/hypr/bindings/system.sh screenrecord_selection

# ============================================================================
# COLOR PICKER
# ============================================================================
# Pick colors from screen for design work

# Color Picker (SUPER + CTRL + c)
#   - Click anywhere to copy hex color to clipboard
#   - Press ESC to cancel
bind = SUPER CTRL, c, exec, hyprpicker -a && notify-send "  Color Picker" "Color copied to clipboard"

# Alternative: Color picker that stays active
# bind = SUPER CTRL, c, exec, hyprpicker -a -r

# ============================================================================
# NOTIFICATION MANAGEMENT
# ============================================================================
# Control notification daemon (mako/dunst)
#   - makoctl: Command-line control for mako notifications

# Dismiss Last Notification (SUPER + COMMA)
bind = SUPER, COMMA, exec, makoctl dismiss

# Dismiss All Notifications (SUPER + SHIFT + COMMA)
bind = SUPER SHIFT, COMMA, exec, makoctl dismiss --all

# Toggle Do Not Disturb (SUPER + CTRL + COMMA)
#   - Silences notifications
#   - Toggle again to re-enable
bind = SUPER CTRL, COMMA, exec, bash -lc 'makoctl mode -t do-not-disturb && makoctl mode | grep -q "do-not-disturb" && notify-send "  Do Not Disturb" "Notifications silenced" || notify-send "  Notifications Enabled" "Notifications restored"'

# Restore Last Notification (bring back dismissed notification)
# bind = SUPER ALT, COMMA, exec, makoctl restore

# Show Notification History (if using dunst)
# bind = SUPER SHIFT CTRL, COMMA, exec, dunstctl history-pop

# ============================================================================
# SYSTEM TOGGLES
# ============================================================================

# Toggle Nightlight (SUPER + CTRL + n)
#   - Enables/disables blue light filter
#   - Adjusts color temperature for eye comfort
#   - "n" for nightlight
bind = SUPER CTRL, n, exec, ~/.config/hypr/bindings/media.sh toggle_nightlight

# Toggle Idle Lock (SUPER + CTRL + i)
#   - Enables/disables automatic screen locking
#   - Useful when watching videos or presenting
#   - "i" for idle
bind = SUPER CTRL, i, exec, ~/.config/hypr/bindings/system.sh toggle_idle_lock

# Toggle Window Transparency (SUPER + BACKSPACE)
#   - Makes active window opaque or transparent
#   - Useful for windows with readability issues
bind = SUPER, BACKSPACE, exec, hyprctl dispatch setprop "address:$(hyprctl activewindow -j | jq -r '.address')" opaque toggle && notify-send "  Transparency" "Toggled for active window"

# Toggle Workspace Gaps (SUPER + SHIFT + BACKSPACE)
#   - Removes/restores gaps for current workspace
#   - Useful for maximizing screen space
bind = SUPER SHIFT, BACKSPACE, exec, ~/.config/hypr/bindings/system.sh toggle_gaps

# Toggle Waybar (SUPER + SHIFT + SPACE)
#   - Shows/hides the top bar
#   - For distraction-free mode or screenshots
bind = SUPER SHIFT, SPACE, exec, ~/.config/hypr/bindings/system.sh toggle_waybar

# Alternative: Restart waybar (if it crashes)
# bind = SUPER SHIFT CTRL, SPACE, exec, pkill waybar && setsid uwsm-app -- waybar &

# ============================================================================
# INFORMATION DISPLAYS
# ============================================================================
# Quick system information without opening system monitor

# Show Current Time & Date (SUPER + CTRL + t)
#   - "t" for time
#   - Displays formatted date and time
bind = SUPER CTRL, t, exec, notify-send "    $(date +"%A %H:%M")" "$(date +"  %d %B %Y  —  Week %V")"

# Show Battery Status (SUPER + CTRL + b)
#   - "b" for battery
#   - Shows percentage and charging status
bind = SUPER CTRL, b, exec, ~/.config/hypr/bindings/system.sh show_battery

# Show Network Info (SUPER + CTRL + SHIFT + n)
#   - Displays WiFi/network connection status
# bind = SUPER CTRL SHIFT, n, exec, ~/.config/hypr/bindings/system.sh show_network_info

# Show System Resources (SUPER + CTRL + r)
#   - Quick CPU/RAM/Disk usage overview
# bind = SUPER CTRL, r, exec, ~/.config/hypr/bindings/system.sh show_system_resources

# Show Clipboard Contents
#   - Preview what's currently in clipboard
# bind = SUPER CTRL, v, exec, notify-send "  Clipboard" "$(wl-paste)"

# ============================================================================
# MENU SYSTEMS
# ============================================================================
# Launch various menus for system control

# System Power Menu (SUPER + ESCAPE)
#   - Shutdown, restart, logout, sleep options
#   - ESC for exit/escape
bind = SUPER, ESCAPE, exec, ~/.config/hypr/bindings/system.sh menu_trigger

# Alternative: Use XF86PowerOff key if available
# bindl = , XF86PowerOff, exec, ~/.config/hypr/bindings/system.sh power_menu

# Show Keybindings (SUPER + k)
#   - Display cheatsheet of all keybindings
#   - "k" for keys
bind = SUPER, k, exec, ~/.config/hypr/bindings/system.sh show_keybindings

# Alternative: Open keybindings reference in browser
# bind = SUPER, k, exec, uwsm-app -- $browser ~/.config/hypr/keybindings.html

# Emoji Picker (SUPER + CTRL + e)
#   - Select and insert emoji
#   - "e" for emoji
bind = SUPER CTRL, e, exec, uwsm-app -- $launcher --mode symbols

# Alternative emoji pickers:
# bind = SUPER CTRL, e, exec, uwsm-app -- rofi -show emoji
# bind = SUPER CTRL, e, exec, ~/.config/hypr/bindings/system.sh emoji_picker

# Clipboard History (SUPER + CTRL + v)
#   - View and select from clipboard history
#   - "v" for paste (vim-style)
bind = SUPER CTRL, v, exec, uwsm-app -- $launcher --mode clipboard

# Alternative clipboard managers:
# bind = SUPER CTRL, v, exec, cliphist list | rofi -dmenu | cliphist decode | wl-copy
# bind = SUPER CTRL, v, exec, copyq menu

# Calculator (SUPER + =)
#   - Quick calculator access
#   - Already defined in apps.conf, listed here for reference
# bind = SUPER, equal, exec, uwsm-app -- gnome-calculator

# ============================================================================
# SCREEN LOCKING
# ============================================================================

# Lock Screen Immediately (SUPER + CTRL + l)
#   - "l" for lock
#   - Immediately activates screen lock
bind = SUPER CTRL, l, exec, loginctl lock-session

# Alternative: Direct hyprlock invocation
# bind = SUPER CTRL, l, exec, hyprlock

# ============================================================================
# SYSTEM ACTIONS
# ============================================================================

# Reload Hyprland Configuration (SUPER + CTRL + r)
#   - Applies config changes without restarting
#   - "r" for reload
bind = SUPER CTRL, r, exec, hyprctl reload && notify-send "  Hyprland" "Configuration reloaded"

# Exit Hyprland (SUPER + CTRL + SHIFT + e)
#   - Logs out of Hyprland session
#   - Requires confirmation (prevent accidental logout)
# bind = SUPER CTRL SHIFT, e, exit,

# Kill Hyprland (emergency escape)
#   - Force quit Hyprland (use if frozen)
# bind = SUPER CTRL SHIFT, BACKSPACE, exec, hyprctl dispatch exit

# ============================================================================
# CLIPBOARD UTILITIES
# ============================================================================

# Copy/Paste/Cut (SUPER + c/v/x)
#   - Universal clipboard operations
#   - Works across all applications
#   - Defined in separate clipboard.conf (if exists) or here

# Universal Copy (SUPER + c)
#   - Sends Ctrl+Insert (works in more apps than Ctrl+C)
bind = SUPER, c, sendshortcut, CTRL, Insert,

# Universal Paste (SUPER + v)
#   - Sends Shift+Insert (works in terminals and X11 apps)
bind = SUPER, v, sendshortcut, SHIFT, Insert,

# Universal Cut (SUPER + x)
#   - Standard cut operation
bind = SUPER, x, sendshortcut, CTRL, x,

# ============================================================================
# FILE SHARING & TRANSFER
# ============================================================================

# Quick Share Menu (SUPER + CTRL + s)
#   - Share files via LocalSend, KDE Connect, etc.
#   - "s" for share
bind = SUPER CTRL, s, exec, ~/.config/hypr/bindings/system.sh menu_share

# Open LocalSend (if installed)
# bind = SUPER CTRL SHIFT, s, exec, uwsm-app -- localsend_app

# ============================================================================
# ACCESSIBILITY
# ============================================================================

# Toggle Screen Magnifier
# bind = SUPER ALT, m, exec, hyprctl keyword misc:zoom_factor $( [[ $(hyprctl getoption misc:zoom_factor | grep float | awk '{print $2}') == "1.000000" ]] && echo "2.0" || echo "1.0" )

# Increase Zoom
# bind = SUPER ALT, equal, exec, hyprctl keyword misc:zoom_factor $(echo "$(hyprctl getoption misc:zoom_factor | grep float | awk '{print $2}') + 0.5" | bc)

# Decrease Zoom
# bind = SUPER ALT, minus, exec, hyprctl keyword misc:zoom_factor $(echo "$(hyprctl getoption misc:zoom_factor | grep float | awk '{print $2}') - 0.5" | bc)

# ============================================================================
# SPECIAL UTILITIES
# ============================================================================

# Screen Text Recognition (OCR)
#   - Select region and extract text
#   - Requires: tesseract, grim, slurp
# bind = SUPER CTRL, t, exec, ~/.config/hypr/bindings/system.sh ocr_screenshot

# QR Code Scanner
#   - Scan QR code from screen
#   - Requires: zbar-tools
# bind = SUPER CTRL, q, exec, ~/.config/hypr/bindings/system.sh scan_qr_code

# ============================================================================
# QUICK REFERENCE
# ============================================================================
# Screenshots:
#   PRINT                    → Full screenshot to clipboard
#   SHIFT + PRINT            → Selection screenshot to clipboard
#   SUPER + PRINT            → Screenshot with editor
#
# Notifications:
#   SUPER + COMMA            → Dismiss notification
#   SUPER + SHIFT + COMMA    → Dismiss all
#   SUPER + CTRL + COMMA     → Toggle Do Not Disturb
#
# Toggles:
#   SUPER + CTRL + n         → Toggle nightlight
#   SUPER + CTRL + i         → Toggle idle lock
#   SUPER + BACKSPACE        → Toggle window transparency
#   SUPER + SHIFT + BACKSPACE→ Toggle workspace gaps
#
# Information:
#   SUPER + CTRL + t         → Show time/date
#   SUPER + CTRL + b         → Show battery
#
# Menus:
#   SUPER + ESCAPE           → Power menu
#   SUPER + k                → Keybindings help
#   SUPER + CTRL + e         → Emoji picker
#   SUPER + CTRL + v         → Clipboard history
#
# Utilities:
#   SUPER + CTRL + c         → Color picker
#   SUPER + CTRL + l         → Lock screen
#   SUPER + CTRL + r         → Reload config
