#
# Steam Window Rules
# https://wiki.hyprland.org/Configuring/Window-Rules/
#
# Configuration for Steam client and Steam games.
#

# ============================================================================
# STEAM CLIENT
# ============================================================================
# Main Steam window behavior
#   - Steam works better as floating window
#   - Fixed sizing prevents layout issues

# Float Steam client
windowrule = float, class:(steam|Steam)

# Center Steam client
windowrule = center, class:(steam|Steam), title:(Steam)

# No transparency for Steam (better performance and readability)
windowrule = opacity 1 1, class:(steam|Steam)

# Default size for main Steam window
windowrule = size 1100 700, class:(steam|Steam), title:(Steam)

# ============================================================================
# STEAM FRIENDS LIST
# ============================================================================
# Friends list is a separate window

windowrule = float, class:(steam|Steam), title:(Friends List)
windowrule = size 460 800, class:(steam|Steam), title:(Friends List)

# Alternative: Position friends list to the right side
# windowrulev2 = move 100%-460 100, class:(steam|Steam), title:(Friends List)

# ============================================================================
# STEAM POPUPS & DIALOGS
# ============================================================================
# Various Steam dialogs (settings, downloads, etc.)

# Settings window
windowrulev2 = float, class:(steam|Steam), title:(Settings)
windowrulev2 = size 900 600, class:(steam|Steam), title:(Settings)
windowrulev2 = center, class:(steam|Steam), title:(Settings)

# Downloads window
windowrulev2 = float, class:(steam|Steam), title:(Downloads)
windowrulev2 = size 800 500, class:(steam|Steam), title:(Downloads)

# Screenshot uploader
windowrulev2 = float, class:(steam|Steam), title:(Screenshot)
windowrulev2 = size 700 500, class:(steam|Steam), title:(Screenshot)

# ============================================================================
# STEAM GAMES
# ============================================================================
# Games launched through Steam
#   - Class usually: steam_app_[APPID]
#   - Example: steam_app_730 (CS:GO), steam_app_570 (Dota 2)

# Fullscreen by default for games
windowrule = fullscreen, class:^(steam_app_).*

# No gaps for games (maximize screen space)
windowrule = workspace unset, class:^(steam_app_).*

# Immediate window creation (no animation delay)
#   - Reduces perceived launch time
windowrule = immediate, class:^(steam_app_).*

# Idle inhibit for games (prevent sleep/dimming during gameplay)
#   - fullscreen: Only when game is fullscreen
#   - focus: Always when game window is focused (more aggressive)
windowrule = idleinhibit fullscreen, class:^(steam_app_).*

# Alternative: Idle inhibit when focused (even in windowed mode)
# windowrule = idleinhibit focus, class:^(steam_app_).*

# No transparency for games (performance and visual quality)
windowrule = opacity 1 1, class:^(steam_app_).*

# ============================================================================
# STEAM BIG PICTURE MODE
# ============================================================================
# Big Picture mode (controller-friendly interface)

# Fullscreen and no border
windowrulev2 = fullscreen, class:(steam|Steam), title:(Steam Big Picture Mode)
windowrulev2 = noborder, class:(steam|Steam), title:(Steam Big Picture Mode)
windowrulev2 = idleinhibit fullscreen, class:(steam|Steam), title:(Steam Big Picture Mode)

# ============================================================================
# STEAM OVERLAY
# ============================================================================
# In-game Steam overlay (Shift+Tab by default)
#   - Usually handled automatically by Steam
#   - No special Hyprland rules needed
#   - Listed here for documentation

# Note: Steam overlay is rendered by Steam itself, not as a separate window
# It appears as part of the game window, so no window rules apply

# ============================================================================
# PROTON / WINE GAMES
# ============================================================================
# Games running through Proton (Steam's Wine compatibility layer)
#   - Usually use class: steam_app_[APPID]
#   - Same rules as native games apply
#   - Some games may need xwayland compatibility

# Force XWayland for specific problematic games (if needed)
#   - Example: Some older games work better with XWayland
# windowrule = xwayland, class:(steam_app_12345)

# ============================================================================
# SPECIFIC GAME RULES
# ============================================================================
# Custom rules for specific games by App ID

# Counter-Strike 2 (App ID: 730)
# windowrule = fullscreen, class:(steam_app_730)
# windowrule = idleinhibit focus, class:(steam_app_730)

# Dota 2 (App ID: 570)
# windowrule = fullscreen, class:(steam_app_570)

# Team Fortress 2 (App ID: 440)
# windowrule = fullscreen, class:(steam_app_440)

# Cyberpunk 2077 (App ID: 1091500)
# windowrule = fullscreen, class:(steam_app_1091500)
# windowrule = immediate, class:(steam_app_1091500)

# Baldur's Gate 3 (App ID: 1086940)
# windowrule = fullscreen, class:(steam_app_1086940)

# ============================================================================
# WORKSPACE ASSIGNMENT
# ============================================================================
# Optionally send Steam to a specific workspace

# Steam client to workspace 9 (uncomment if desired)
# windowrule = workspace 9, class:(steam|Steam), title:(Steam)

# Games to floating workspace (allows playing while doing other work)
# windowrule = workspace special:gaming, class:^(steam_app_).*

# ============================================================================
# GAMEMODE INTEGRATION
# ============================================================================
# If using GameMode (Linux game optimization)
#   - GameMode runs automatically for detected games
#   - No Hyprland config needed
#   - Install: pacman -S gamemode
#   - Enable: gamemode-enabled-games

# Note: GameMode is configured via /etc/gamemode.ini or ~/.config/gamemode.ini

# ============================================================================
# MANGOHUD INTEGRATION
# ============================================================================
# MangoHud (FPS counter and performance overlay)
#   - Overlays on games automatically if enabled
#   - Enable globally: mangohud %command% (in Steam launch options)
#   - Enable per-game: Right-click game → Properties → Launch Options: mangohud %command%
#   - Configure: ~/.config/MangoHud/MangoHud.conf

# No Hyprland rules needed for MangoHud (it's rendered by the game)

# ============================================================================
# GAMESCOPE INTEGRATION
# ============================================================================
# Gamescope (SteamOS compositor for better game compatibility)
#   - Can be used to run games in isolated compositor
#   - Launch option: gamescope -W 1920 -H 1080 -- %command%

# Gamescope windows should be fullscreen
# windowrule = fullscreen, class:(gamescope)
# windowrule = immediate, class:(gamescope)

# ============================================================================
# PERFORMANCE OPTIMIZATIONS
# ============================================================================
# Tweaks for better gaming performance

# Disable blur for Steam windows (reduces GPU load)
windowrule = noblur, class:(steam|Steam)
windowrule = noblur, class:^(steam_app_).*

# Disable shadows for games (slight performance gain)
# windowrule = noshadow, class:^(steam_app_).*

# No animations for game windows (faster alt-tab)
windowrule = noanim, class:^(steam_app_).*

# ============================================================================
# CONTROLLER SUPPORT
# ============================================================================
# Steam handles controllers through its own input system
#   - SDL and Steam Input work automatically
#   - No Hyprland configuration needed
#   - Controllers work in both X11 and Wayland games

# For games with controller issues:
#   - Try SDL_VIDEODRIVER=x11 in launch options
#   - Or force XWayland: windowrule = xwayland, class:(steam_app_XXXX)

# ============================================================================
# SCREEN TEARING (VRR/FreeSync/G-SYNC)
# ============================================================================
# Variable refresh rate for smooth gameplay
#   - Configure in monitors.conf
#   - Per-monitor VRR: monitor=NAME,...,vrr,1
#   - Global setting: general { allow_tearing = true }

# Enable tearing for specific games (if needed)
# windowrule = immediate, class:(steam_app_730)  # Allows tearing

# ============================================================================
# HOW TO FIND STEAM APP IDs
# ============================================================================
# Method 1: Steam Library
#   - Right-click game → Properties → Updates tab
#   - App ID shown at top
#
# Method 2: Steam Store URL
#   - URL format: store.steampowered.com/app/[APPID]/
#   - Example: /app/730/ is CS:GO
#
# Method 3: Hyprctl while game is running
#   hyprctl clients | grep steam_app
#
# Method 4: Steam installation directory
#   - Check folder names in ~/.local/share/Steam/steamapps/

# ============================================================================
# TROUBLESHOOTING
# ============================================================================
# Problem: Game doesn't go fullscreen
#   Solution: Check if fullscreen rule is applied, try immediate window rule
#
# Problem: Game performance is bad
#   Solution: Disable blur, shadows, animations. Enable VRR in monitors.conf
#
# Problem: Controller doesn't work
#   Solution: Steam usually handles this, try Big Picture mode
#
# Problem: Game window is wrong size
#   Solution: Check game's graphics settings, ensure fullscreen mode
#
# Problem: Can't alt-tab out of game
#   Solution: Games with fullscreen grab may need windowed borderless mode
#
# Problem: Steam overlay doesn't work
#   Solution: Enable in Steam Settings → In-Game → Enable Steam Overlay

# ============================================================================
# NOTES
# ============================================================================
# Steam window classes:
#   - steam: Main Steam client (lowercase)
#   - Steam: Some Steam windows (capitalized)
#   - steam_app_[APPID]: Individual games
#
# Wayland vs XWayland for games:
#   - Native Wayland: Better performance, some compatibility issues
#   - XWayland: Better compatibility, slight overhead
#   - Most games work fine with either
#
# Fullscreen behavior:
#   - Hyprland fullscreen takes full screen + hides bars
#   - Games can also request fullscreen themselves
#   - Both approaches work together
#
# Idle inhibit is important for games:
#   - Without it, screen may dim or sleep during gameplay
#   - fullscreen mode is usually sufficient
#   - focus mode is more aggressive but reliable

