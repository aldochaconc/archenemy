#
# Autostart Configuration
# https://wiki.hyprland.org/Configuring/Keywords/#executing
#
# Programs and services that launch automatically when Hyprland starts.
# Use exec-once for programs that should run only once at startup.
#

# ============================================================================
# CORE SYSTEM SERVICES
# ============================================================================
# These services must start first for proper system functionality

# Idle Management (screen lock, sleep, dpms)
#   - hypridle: Monitors inactivity and triggers actions
#   - Config: ~/.config/hypr/hypridle.conf
#   - Actions: screensaver, screen lock, display power management
exec-once = uwsm-app -- hypridle

# Night Light (blue light filter)
#   - hyprsunset: Adjusts color temperature based on time
#   - Config: ~/.config/hypr/hyprsunset.conf
#   - Toggle: SUPER + CTRL + N
exec-once = uwsm-app -- hyprsunset

# Notification Daemon
#   - mako: Displays notifications (libnotify)
#   - Config: ~/.config/mako/config
#   - Control: makoctl (dismiss, mode, etc.)
exec-once = uwsm-app -- mako

# Status Bar
#   - waybar: Top bar with workspaces, system info, tray
#   - Config: ~/.config/waybar/config.jsonc
#   - Toggle: SUPER + SHIFT + SPACE
exec-once = uwsm-app -- waybar

# Input Method Framework
#   - fcitx5: For CJK (Chinese, Japanese, Korean) input
#   - Config: ~/.config/fcitx5/
#   - Toggle: Ctrl+Space (default)
exec-once = uwsm-app -- fcitx5

# On-Screen Display Server
#   - swayosd-server: Shows volume and brightness indicators
#   - Config: ~/.config/swayosd/config.toml
#   - Triggered: By XF86 media keys
exec-once = uwsm-app -- swayosd-server

# ============================================================================
# DESKTOP UTILITIES
# ============================================================================

# File Synchronization
#   - elephant: Cloud file sync client (Dropbox-like)
#   - Runs in background, shows in system tray
exec-once = uwsm-app -- elephant

# Application Launcher Service
#   - walker: App launcher daemon for quick startup
#   - Launch: SUPER + SPACE or SUPER + /
#   - --gapplication-service: Runs as D-Bus service
exec-once = uwsm-app -- walker --gapplication-service

# ============================================================================
# WALLPAPER
# ============================================================================
# Background Image
#   - swaybg: Wallpaper manager for Wayland
#   - -i: Image path (supports jpg, png, webp)
#   - -m fill: Scaling mode
#     fill: Scale and crop to fill screen (default)
#     fit: Scale to fit, may show bars
#     stretch: Distort to fill
#     center: No scaling, centered
#     tile: Repeat image as tiles
exec-once = swaybg -i ~/.config/background -m fill

# Alternative: Use hyprpaper (native Hyprland wallpaper)
# exec-once = hyprpaper
#   - Config: ~/.config/hypr/hyprpaper.conf
#   - Can set different wallpapers per monitor
#   - Supports animations and transitions

# ============================================================================
# SYSTEMD INTEGRATION
# ============================================================================
# Import environment variables to systemd user session
#   - Allows systemd services to access Wayland/Hyprland variables
#   - Critical for screen sharing, portals, etc.
exec-once = systemctl --user import-environment $(env | cut -d'=' -f 1)

# Update D-Bus activation environment
#   - Ensures D-Bus services can see Wayland session variables
#   - Required for proper portal integration (file pickers, screen sharing)
exec-once = dbus-update-activation-environment --systemd --all

# ============================================================================
# AUTHENTICATION & SECURITY
# ============================================================================
# Polkit Authentication Agent
#   - Handles elevation prompts (password dialogs for sudo-like actions)
#   - Required for: mounting drives, system settings, package managers
# exec-once = /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1

# Alternative polkit agents (choose one):
# exec-once = /usr/lib/polkit-kde-authentication-agent-1
# exec-once = /usr/lib/xfce-polkit/xfce-polkit

# ============================================================================
# ADDITIONAL STARTUP PROGRAMS (Optional)
# ============================================================================
# Add your own autostart applications below

# Clipboard Manager
#   - Stores clipboard history for quick access
#   - Access: SUPER + CTRL + V (if configured)
# exec-once = wl-paste --type text --watch cliphist store
# exec-once = wl-paste --type image --watch cliphist store

# Network Manager Applet
#   - System tray icon for WiFi/network management
# exec-once = nm-applet --indicator

# Bluetooth Manager Applet
#   - System tray icon for Bluetooth devices
# exec-once = blueman-applet

# Auto-mounting for USB drives
#   - udiskie: Automatically mount USB/external drives
#   - -t: Show tray icon
# exec-once = udiskie -t

# Cloud Storage
#   - Syncthing: Decentralized file sync
# exec-once = syncthing-gtk --minimized
#   - Dropbox: Cloud storage client
# exec-once = dropbox start

# Password Manager
#   - KeePassXC: Password database with auto-type
# exec-once = keepassxc
#   - Bitwarden: Cloud password manager
# exec-once = bitwarden-desktop --hidden

# Communication Apps (start minimized to tray)
#   - Discord: Gaming/community chat
# exec-once = discord --start-minimized
#   - Slack: Work communication
# exec-once = slack -u
#   - Signal: Secure messaging
# exec-once = signal-desktop --start-in-tray

# Media Players
#   - Spotify: Music streaming (if installed via AUR)
# exec-once = spotify --minimized

# Screenshot Tool (daemon mode)
#   - flameshot: Advanced screenshot tool with editor
# exec-once = flameshot

# Redshift alternative (if not using hyprsunset)
#   - wlsunset: Wayland color temperature adjuster
# exec-once = wlsunset -l 40.7 -L -74.0  # Replace with your latitude/longitude

# Display Color Calibration
#   - wl-gammactl: Color temperature and gamma control
# exec-once = wl-gammactl set 1.0

# ============================================================================
# UWSM-APP WRAPPER EXPLANATION
# ============================================================================
# uwsm-app: Universal Wayland Session Manager application wrapper
#   - Ensures apps run in proper session context
#   - Sets up cgroups for proper cleanup
#   - Handles systemd user service integration
#   - Syntax: uwsm-app -- COMMAND [ARGS...]
#
# When to use:
#   - Always for GUI applications in exec-once
#   - Not needed for system daemons or scripts
#
# Alternative: Direct execution (use only if uwsm-app causes issues)
#   exec-once = hypridle
#   exec-once = waybar

