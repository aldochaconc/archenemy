#!/usr/bin/env bash
#
# Archenemy Quick Reference
# Display reference docs - Bash compatible
set -euo pipefail

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
REF_DIR="$SCRIPT_DIR/reference"

if [[ -t 1 ]]; then
  RED='\033[0;31m' CYAN='\033[0;36m' BOLD='\033[1m' RESET='\033[0m'
else
  RED='' CYAN='' BOLD='' RESET=''
fi

show_help() {
  cat <<EOF
${BOLD}ae ref${RESET} - Quick Reference

${BOLD}USAGE:${RESET}
  ae ref <type>

${BOLD}TYPES:${RESET}
  ${CYAN}keys${RESET}          Keybinding reference
  ${CYAN}vim${RESET}           Vim parallels
  ${CYAN}commands${RESET}      Available commands
  ${CYAN}hypr${RESET}          Hyprland variables
  ${CYAN}troubleshoot${RESET}  Common issues
EOF
}

main() {
  local type="${1:-keys}"

  case "$type" in
  keys)
    cat "$REF_DIR/keybindings.txt" | ${PAGER:-less}
    ;;
  vim)
    cat "$REF_DIR/vim-parallels.txt" | ${PAGER:-less}
    ;;
  commands)
    cat "$REF_DIR/commands.txt" | ${PAGER:-less}
    ;;
  hypr)
    cat "$REF_DIR/hyprland-vars.txt" | ${PAGER:-less}
    ;;
  troubleshoot)
    cat "$REF_DIR/troubleshooting.txt" | ${PAGER:-less}
    ;;
  --help | -h)
    show_help
    ;;
  *)
    echo -e "${RED}Error:${RESET} Unknown reference type '$type'"
    echo "Run ${CYAN}ae ref --help${RESET} for available types"
    exit 1
    ;;
  esac
}

main "$@"
