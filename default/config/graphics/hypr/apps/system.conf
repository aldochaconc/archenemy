#
# System Applications Window Rules
# https://wiki.hyprland.org/Configuring/Window-Rules/
#
# Configuration for system apps: file pickers, dialogs, settings, media players, utilities.
#

# ============================================================================
# FLOATING WINDOW TAG
# ============================================================================
# Tag windows that should float by default
#   - Creates consistent styling for all floating system windows
#   - Easier to manage than individual rules

windowrule = tag +floating-window, class:(blueberry.py|org.gnome.NautilusPreviewer|com.gabm.satty|About)
windowrule = tag +floating-window, class:(xdg-desktop-portal-gtk|sublime_text|org.gnome.Nautilus), title:^(Open.*Files?|Open [F|f]older.*|Save.*Files?|Save.*As|Save|All Files|.*wants to [open|save].*|[C|c]hoose.*)

# Apply floating behavior to tagged windows
windowrule = float, tag:floating-window
windowrule = center, tag:floating-window
windowrule = size 875 600, tag:floating-window

# ============================================================================
# FILE PICKERS & DIALOGS
# ============================================================================
# System file chooser dialogs need to float for usability

# GTK File Picker (xdg-desktop-portal-gtk)
#   - System file open/save dialogs
#   - Pattern matches common dialog titles
windowrulev2 = float, class:(xdg-desktop-portal-gtk), title:(Open.*|Save.*|Choose.*)
windowrulev2 = size 900 600, class:(xdg-desktop-portal-gtk), title:(Open.*|Save.*|Choose.*)
windowrulev2 = center, class:(xdg-desktop-portal-gtk), title:(Open.*|Save.*|Choose.*)

# Nautilus file chooser
windowrulev2 = float, class:(org.gnome.Nautilus), title:(Open.*|Save.*|Choose.*)
windowrulev2 = size 900 600, class:(org.gnome.Nautilus), title:(Open.*|Save.*|Choose.*)

# KDE File Picker
# windowrulev2 = float, class:(org.kde.kdialog)
# windowrulev2 = size 900 600, class:(org.kde.kdialog)

# ============================================================================
# CALCULATOR
# ============================================================================
# Small utility window, always float

windowrule = float, class:(org.gnome.Calculator|qalculate-gtk|galculator)
windowrule = size 400 500, class:(org.gnome.Calculator|qalculate-gtk|galculator)
windowrule = center, class:(org.gnome.Calculator|qalculate-gtk|galculator)

# KDE Calculator (KCalc)
# windowrule = float, class:(org.kde.kcalc)
# windowrule = size 400 500, class:(org.kde.kcalc)

# ============================================================================
# SETTINGS & CONTROL PANELS
# ============================================================================

# GNOME Settings
windowrule = float, class:(org.gnome.Settings)
windowrule = size 1000 700, class:(org.gnome.Settings)
windowrule = center, class:(org.gnome.Settings)

# GNOME Control Center
windowrule = float, class:(gnome-control-center)
windowrule = size 1000 700, class:(gnome-control-center)

# Bluetooth Manager (Blueberry)
windowrule = float, class:(blueberry.py)
windowrule = size 600 500, class:(blueberry.py)
windowrule = center, class:(blueberry.py)

# Network Manager
windowrule = float, class:(nm-connection-editor)
windowrule = size 600 500, class:(nm-connection-editor)

# PulseAudio/PipeWire Volume Control (pavucontrol)
windowrule = float, class:(pavucontrol|org.pulseaudio.pavucontrol)
windowrule = size 800 600, class:(pavucontrol|org.pulseaudio.pavucontrol)
windowrule = center, class:(pavucontrol|org.pulseaudio.pavucontrol)

# ============================================================================
# MEDIA PLAYERS
# ============================================================================
# Video and audio players often need special handling

# MPV (video player)
#   - No transparency for video playback
#   - Idle inhibit when fullscreen (prevent sleep during movies)
windowrule = opacity 1 1, class:(mpv)
windowrule = idleinhibit fullscreen, class:(mpv)

# Alternative: Idle inhibit when focused (if you want it for windowed playback)
# windowrule = idleinhibit focus, class:(mpv)

# VLC Media Player
windowrule = opacity 1 1, class:(vlc)
windowrule = idleinhibit fullscreen, class:(vlc)

# Alternative: Float VLC by default
# windowrule = float, class:(vlc)
# windowrule = size 70% 70%, class:(vlc)

# ============================================================================
# IMAGE VIEWERS
# ============================================================================

# imv (image viewer)
#   - Lightweight Wayland image viewer
#   - No transparency for accurate color viewing
windowrule = opacity 1 1, class:(imv)

# Float imv by default (optional)
windowrule = float, class:(imv)
windowrule = size 60% 80%, class:(imv)
windowrule = center, class:(imv)

# GNOME Image Viewer (eog/Eye of GNOME)
windowrule = float, class:(org.gnome.eog|eog)
windowrule = size 60% 80%, class:(org.gnome.eog|eog)
windowrule = center, class:(org.gnome.eog|eog)
windowrule = opacity 1 1, class:(org.gnome.eog|eog)

# gThumb (image organizer)
# windowrule = opacity 1 1, class:(org.gnome.gThumb)

# GIMP (image editor)
#   - Complex multi-window app, usually keep tiled
windowrule = opacity 1 1, class:(gimp-2.10|org.gimp.GIMP)

# ============================================================================
# PDF VIEWERS
# ============================================================================

# Zathura (lightweight PDF viewer)
windowrule = opacity 1 1, class:(org.pwmt.zathura|zathura)

# Evince (GNOME document viewer)
windowrule = opacity 1 1, class:(org.gnome.Evince)

# Okular (KDE document viewer)
# windowrule = opacity 1 1, class:(org.kde.okular)

# ============================================================================
# ARCHIVE MANAGERS
# ============================================================================

# File Roller (GNOME archive manager)
windowrule = float, class:(org.gnome.FileRoller)
windowrule = size 800 600, class:(org.gnome.FileRoller)

# Ark (KDE archive manager)
# windowrule = float, class:(org.kde.ark)
# windowrule = size 800 600, class:(org.kde.ark)

# ============================================================================
# SCREENSHOT TOOLS
# ============================================================================

# Satty (screenshot annotation)
windowrule = float, class:(com.gabm.satty)
windowrule = size 80% 80%, class:(com.gabm.satty)
windowrule = center, class:(com.gabm.satty)

# Swappy (screenshot editor)
windowrule = float, class:(swappy)
windowrule = size 80% 80%, class:(swappy)

# Flameshot (screenshot tool)
windowrule = float, class:(flameshot)
windowrule = noborder, class:(flameshot)
windowrule = noanim, class:(flameshot)

# ============================================================================
# PASSWORD MANAGERS
# ============================================================================

# 1Password
windowrule = float, class:(1Password)
windowrule = size 1000 700, class:(1Password)
windowrule = center, class:(1Password)

# Bitwarden
windowrule = float, class:(Bitwarden)
windowrule = size 1000 700, class:(Bitwarden)

# KeePassXC
windowrule = float, class:(org.keepassxc.KeePassXC)
windowrule = size 1200 800, class:(org.keepassxc.KeePassXC)

# ============================================================================
# LAUNCHERS & MENUS
# ============================================================================

# Walker (application launcher)
layerrule = noanim, walker
layerrule = blur, walker

# Rofi (menu system)
# windowrule = float, class:(Rofi)
# windowrule = noborder, class:(Rofi)
# windowrule = noanim, class:(Rofi)

# Wofi (Wayland launcher)
# windowrule = float, class:(wofi)
# windowrule = noborder, class:(wofi)

# ============================================================================
# SYSTEM MONITORS & UTILITIES
# ============================================================================

# Mission Center (system monitor)
# windowrule = float, class:(io.missioncenter.MissionCenter)
# windowrule = size 900 700, class:(io.missioncenter.MissionCenter)

# GNOME System Monitor
# windowrule = float, class:(gnome-system-monitor)
# windowrule = size 900 700, class:(gnome-system-monitor)

# ============================================================================
# SCREENSAVER
# ============================================================================
# Fullscreen screensaver (if using custom screensaver)

windowrule = fullscreen, class:(Screensaver|screensaver)
windowrule = noborder, class:(Screensaver|screensaver)
windowrule = noanim, class:(Screensaver|screensaver)

# ============================================================================
# ABOUT/HELP DIALOGS
# ============================================================================
# Small informational windows

windowrule = float, class:(About|about)
windowrule = size 600 400, class:(About|about)
windowrule = center, class:(About|about)

windowrule = float, title:(About.*|Help.*|Preferences|Settings)
windowrule = size 600 400, title:(About.*|Help.*|Preferences)

# ============================================================================
# DISK USAGE ANALYZERS
# ============================================================================

# Baobab (GNOME disk usage)
# windowrule = float, class:(org.gnome.baobab)
# windowrule = size 900 700, class:(org.gnome.baobab)

# Filelight (KDE disk usage)
# windowrule = float, class:(org.kde.filelight)
# windowrule = size 900 700, class:(org.kde.filelight)

# ============================================================================
# CLIPBOARD MANAGERS
# ============================================================================

# CopyQ
# windowrule = float, class:(com.github.hluk.copyq)
# windowrule = size 600 500, class:(com.github.hluk.copyq)

# Clipman
# windowrule = float, class:(xfce4-clipman)

# ============================================================================
# POLKIT AUTHENTICATION AGENTS
# ============================================================================
# Password prompts for elevated permissions

# GNOME Polkit
windowrule = float, class:(org.gnome.polkit-gnome-authentication-agent-1)
windowrule = size 400 300, class:(org.gnome.polkit-gnome-authentication-agent-1)
windowrule = center, class:(org.gnome.polkit-gnome-authentication-agent-1)

# KDE Polkit
# windowrule = float, class:(org.kde.polkit-kde-authentication-agent-1)
# windowrule = size 400 300, class:(org.kde.polkit-kde-authentication-agent-1)

# ============================================================================
# NOTIFICATION OVERLAYS
# ============================================================================
# Notification daemon windows (mako/dunst)
#   - These are usually layer surfaces, not windows
#   - Configuration in their own config files
#   - Listed here for reference

# Mako: ~/.config/mako/config
# Dunst: ~/.config/dunst/dunstrc

# ============================================================================
# SPECIAL WINDOW RULES
# ============================================================================

# Prevent transparency on media/document viewers
#   - Ensures accurate color representation
#   - Better readability for text documents
windowrule = opacity 1 1, class:(mpv|vlc|org.kde.kdenlive|com.obsproject.Studio|gimp|krita|inkscape|blender)

# Idle inhibit for fullscreen apps
#   - Prevents screen from sleeping during presentations, movies, games
windowrule = idleinhibit fullscreen, class:(mpv|vlc|org.gnome.Totem)

# ============================================================================
# NOTES
# ============================================================================
# Window rule priority:
#   1. windowrulev2 (more specific, evaluated first)
#   2. windowrule (general, evaluated after)
#   3. Later rules override earlier ones if they conflict
#
# Size formats:
#   - Absolute: 800 600 (pixels)
#   - Percentage: 80% 60% (of monitor size)
#   - Mixed: 1000 50% (1000px wide, 50% of monitor height)
#
# idleinhibit modes:
#   - focus: Inhibit while window is focused
#   - fullscreen: Inhibit only when fullscreen (recommended for media)
#   - none: Never inhibit
#
# Tag-based rules:
#   - Easier to maintain than repetitive individual rules
#   - Changes apply to all windows with that tag
#   - Good for grouping similar window types

