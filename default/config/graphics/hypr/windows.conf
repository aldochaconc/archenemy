#
# Window Rules Configuration
# https://wiki.hyprland.org/Configuring/Window-Rules/
#
# Define global window behaviors and source app-specific configurations.
# Rules control positioning, sizing, opacity, floating, and special behaviors.
#

# ============================================================================
# WINDOW RULE SYNTAX
# ============================================================================
# Two formats available:
#
# 1. windowrule = RULE, WINDOW
#    - Legacy format, simple matching
#    - WINDOW: regex pattern matching class or title
#    - Example: windowrule = float, ^(pavucontrol)$
#
# 2. windowrulev2 = RULE, CRITERIA
#    - Modern format, supports multiple criteria
#    - Can match: class, title, initialClass, initialTitle, xwayland, floating, etc.
#    - Example: windowrulev2 = float, class:^(pavucontrol)$, title:^(Volume Control)$
#
# Common Rules:
#   - float: Make window floating
#   - tile: Force window to tile
#   - fullscreen: Start fullscreen
#   - maximize: Maximize window
#   - move X Y: Position window at coordinates
#   - size W H: Set window dimensions
#   - center: Center window on screen
#   - opacity VALUE: Set window opacity (0.0-1.0)
#   - workspace ID: Send to specific workspace
#   - tag +NAME: Add tag for grouped styling
#   - nofocus: Don't focus this window
#   - noinitialfocus: Don't focus on window creation
#   - suppressevent EVENT: Ignore specific events
#
# Common Criteria:
#   - class:REGEX: Match window class (see: hyprctl clients)
#   - title:REGEX: Match window title
#   - initialClass:REGEX: Match class at creation
#   - initialTitle:REGEX: Match title at creation
#   - xwayland:1 or :0: Match XWayland vs native Wayland
#   - floating:1 or :0: Match floating vs tiled
#   - fullscreen:1 or :0: Match fullscreen state

# ============================================================================
# GLOBAL WINDOW RULES
# ============================================================================

# Suppress Maximize Events (prevent apps from self-maximizing)
#   - Many apps try to maximize themselves on launch
#   - This keeps your tiling layout intact
#   - Applies to all windows (class:.*)
windowrulev2 = suppressevent maximize, class:.*

# Fix XWayland Focus Issues
#   - Some XWayland windows create invisible helper windows
#   - These can steal focus unintentionally
#   - This rule prevents focusing empty XWayland windows that are:
#     * No class (class:^$)
#     * No title (title:^$)
#     * XWayland (xwayland:1)
#     * Floating (floating:1)
#     * Not fullscreen (fullscreen:0)
#     * Not pinned (pinned:0)
windowrulev2 = nofocus,class:^$,title:^$,xwayland:1,floating:1,fullscreen:0,pinned:0

# ============================================================================
# DEFAULT OPACITY (Optional)
# ============================================================================
# Uncomment to add subtle transparency to all windows
#   - First value: Active window opacity
#   - Second value: Inactive window opacity
#   - 1.0 = opaque, 0.0 = invisible
# windowrule = opacity 0.97 0.90, class:.*

# ============================================================================
# APP-SPECIFIC CONFIGURATIONS
# ============================================================================
# Each application type gets its own configuration file for better organization
# These files contain detailed window rules for specific applications

# Browser window rules (Chromium, Firefox, Brave, etc.)
source = ~/.config/hypr/apps/browser.conf

# Terminal emulator rules (kitty, Alacritty, Ghostty)
source = ~/.config/hypr/apps/terminals.conf

# Development tools (VSCode, Cursor, JetBrains IDEs)
source = ~/.config/hypr/apps/vscode.conf
source = ~/.config/hypr/apps/jetbrains.conf

# Gaming and entertainment
source = ~/.config/hypr/apps/steam.conf

# Communication apps (Discord, Slack, Signal)
source = ~/.config/hypr/apps/discord.conf

# System applications (file pickers, dialogs, settings, media players)
source = ~/.config/hypr/apps/system.conf

# ============================================================================
# QUICK RULE EXAMPLES (for reference)
# ============================================================================
# Copy and uncomment any of these to add custom rules

# Float specific applications:
# windowrule = float, ^(pavucontrol)$              # PulseAudio volume control
# windowrule = float, ^(nm-connection-editor)$    # NetworkManager editor
# windowrule = float, ^(org.gnome.Calculator)$    # Calculator

# Center floating windows:
# windowrulev2 = center, floating:1

# Make a specific app always fullscreen:
# windowrule = fullscreen, ^(mpv)$

# Pin window (show on all workspaces):
# windowrule = pin, ^(keepassxc)$

# Start app on specific workspace:
# windowrule = workspace 2, ^(firefox)$
# windowrule = workspace 3, ^(code)$
# windowrule = workspace 9, ^(discord)$

# Immediate window (no initial workspace animation):
# windowrule = immediate, ^(steam_app).*  # For games

# Opacity per-app (override global opacity):
# windowrule = opacity 1.0 1.0, ^(mpv)$           # No transparency for video
# windowrule = opacity 0.9 0.8, ^(kitty)$         # Slightly transparent terminal

# Size and position:
# windowrulev2 = size 800 600, class:^(pavucontrol)$
# windowrulev2 = move 100 100, class:^(pavucontrol)$

# No animations for specific app:
# windowrule = noanim, ^(flameshot)$

# Idle inhibit (prevent screen from sleeping):
# windowrule = idleinhibit focus, ^(mpv)$         # While focused
# windowrule = idleinhibit fullscreen, ^(firefox)$ # Only when fullscreen

# No blur behind window:
# windowrule = noblur, ^(firefox)$

# No shadow:
# windowrule = noshadow, ^(waybar)$

# Tiling mode for specific floating app:
# windowrule = tile, ^(gimp-2.10)$

# ============================================================================
# LAYER RULES (for overlays, notifications, bars)
# ============================================================================
# Layer windows are special surfaces like bars, notifications, launchers
#   - Syntax: layerrule = RULE, NAMESPACE
#   - Common rules: blur, noanim, ignorealpha, ignorezero
#
# Examples:
# layerrule = blur, waybar                        # Blur behind waybar
# layerrule = noanim, walker                       # No animation for launcher
# layerrule = ignorealpha 0.5, notifications      # Set blur alpha threshold

# ============================================================================
# WORKSPACE RULES (per-workspace settings)
# ============================================================================
# Apply rules to entire workspaces
#   - Syntax: workspace = ID, RULES
#   - Rules: gapsin:N, gapsout:N, border:bool, rounding:bool, etc.
#
# Examples:
# workspace = 1, gapsin:0, gapsout:0              # No gaps on workspace 1
# workspace = 9, gapsin:20, gapsout:40            # Large gaps on workspace 9
# workspace = special:scratchpad, gapsin:30       # Scratchpad with big gaps

# ============================================================================
# HOW TO FIND WINDOW CLASS AND TITLE
# ============================================================================
# Method 1: hyprctl clients
#   Run: hyprctl clients
#   Look for: "class:" and "title:" fields
#
# Method 2: Real-time monitoring
#   Run: hyprctl clients -j | jq -r '.[] | select(.focusHistoryID == 0) | "\(.class) | \(.title)"'
#   Focus different windows to see their properties
#
# Method 3: Interactive
#   1. Focus the window you want to identify
#   2. Run: hyprctl activewindow
#   3. Note the "class" and "title" fields

